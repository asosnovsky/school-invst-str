tmp0
tmp0[1,]
tmp0[1,3]
tmp0[1,4]
apply(tmp0,1,function(x) x[4])
apply(tmp0,1,function(x) orig[[name]][,2] == x[4])
apply(tmp0,1,function(x) which(orig[[name]][,2] == x[4]) )
apply(tmp0,1,function(x) which(orig[[name]][,2] == x[4])+1 )
apply(tmp0,1,function(x) orig[which(orig[[name]][,2] == x[4]),] )
apply(tmp0,1,function(x) orig[which(orig[[name]][,2] == x[4]),] )
apply(tmp0,1,function(x) orig[[name]][which(orig[[name]][,2] == x[4]),] )
test <- apply(tmp0,1,function(x) orig[[name]][which(orig[[name]][,2] == x[4]),] )
as.data.frame(test)
View(as.data.frame(test))
tmp0
View(tmp0)
str(tmp0)
test <- apply(tmp0,1,function(x) orig[[name]][which(orig[[name]][,2] == x[4]),] )
?apply
?tapply
tmp0
for(scho in tmp0){
}
scho
for(school in t(tmp0)){
}
school
t(tmp0)
View(t(tmp0))
length(tmp0[,1])
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
}
school
which(orig[[name]][,2] == school$Name)
orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
View(tmp1)
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp1 <- tmp1[,length(tmp0[1,])-(5:0)]
tmp1 <- tmp1[,length(tmp1[1,])-(5:0)]
View(tmp1)
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp1[,length(tmp1[1,])-(5:0)]
append
append(tmp1[,length(tmp1[1,])-(5:0)],school)
merge(tmp1[,length(tmp1[1,])-(5:0)],school)
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp1 <- tmp1[,length(tmp1[1,])-(5:0)]
tmp1
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=GR/phi)
school
school$Name
top10
top10[[name]]
top10[[name]][[school$Class]]
top10[[name]][[school$Class,]]
school$Class
top10[[name]][[9,]]
top10[[name]][9,]
top10[[name]][school$Class,]
Uo <- top10[[name]][school$Class,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
View(tmp1)
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=GR/phi)
View(tmp1)
tmp1
tmp1[,c('g1','delta')]
cls = data.frame(,row.names = 1)
cls = data.frame(c(NA,NA,NA),)
cls = data.frame(c(NA,NA,NA))
cls
cls = data.frame(rbind(NA,NA,NA))
cls
cls = data.frame(cbind(NA,NA,NA))
cls
cls = data.frame(cbind(NA,NA,NA,NA,NA))
colnames(cls) <- c('name','class','distance','g1','delta')
cls
cls = data.frame()
colnames(cls) <- c('name','class','distance','g1','delta')
cls = data.frame(cbind(NA,NA,NA,NA,NA))
colnames(cls) <- c('name','class','distance','g1','delta')
cls
tmp1
tmp1[,c('g1','delta')]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp2 <- tmp1[,length(tmp1[1,])-(5:0)]
tmp2 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
tmp2 <- mutate(tmp2, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
tmp2
tmp2 <- tmp1[,length(tmp1[1,])-(5:0)]
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
tmp1
tmp1[,c('INSTNM','g1','delta')]
tmp0[scID]
tmp0[scID,]
tmp0[scID,][,c('Name','Class')]
c(tmp0[scID,][,c('Name','Class')],tmp1[,c('INSTNM','g1','delta')])
c(tmp0[scID,][,c('Name','Class')],tmp1[,c(,'g1','delta')])
c(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')])
cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')])
cls
append(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
cbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
cls=c()
rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
cls = c()
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
cls
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
cls
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
rm(list=ls())
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
rm(list=ls())
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
orig <- list()
for(data in dir("Analyzed-Data/")[grepl('cleaned-data.csv',dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data.csv','',data);
if(name=='Tot'){
name <- "4"
}
orig[[name]] <- read.csv(paste0('Analyzed-Data/',data),stringsAsFactors = FALSE)
rm(data)
rm(name)
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
}
chosen[[name]] = cls
}
data
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
scID
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class,]
name
top10[[name]]
school$Class
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
}
chosen[[name]] = cls
}
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0"))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data"))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
chosen[[name]] = cls;
rm(list=ls())
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
orig <- list()
for(data in dir("Analyzed-Data/")[grepl('cleaned-data.csv',dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data.csv','',data);
if(name=='Tot'){
name <- "4"
}
orig[[name]] <- read.csv(paste0('Analyzed-Data/',data),stringsAsFactors = FALSE)
rm(data)
rm(name)
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
orig <- list()
for(data in dir("Analyzed-Data/")[grepl('cleaned-data.csv',dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data.csv','',data);
if(name=='Tot'){
name <- "4"
}
orig[[name]] <- read.csv(paste0('Analyzed-Data/',data),stringsAsFactors = FALSE)
rm(data)
rm(name)
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g','delta')]))
}
chosen[[name]] = cls;
rm(list=ls())
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
orig <- list()
for(data in dir("Analyzed-Data/")[grepl('cleaned-data.csv',dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data.csv','',data);
if(name=='Tot'){
name <- "4"
}
orig[[name]] <- read.csv(paste0('Analyzed-Data/',data),stringsAsFactors = FALSE)
rm(data)
rm(name)
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
rm(list=ls())
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
orig <- list()
for(data in dir("Analyzed-Data/")[grepl('cleaned-data.csv',dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data.csv','',data);
if(name=='Tot'){
name <- "4"
}
orig[[name]] <- read.csv(paste0('Analyzed-Data/',data),stringsAsFactors = FALSE)
rm(data)
rm(name)
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
rm(list=ls())
require('dplyr')
setwd("C:/Github/school-invst-str/Code")
top10 <- list()
for(data in dir("Analyzed-Data/")[grepl("(cleaned-data-top10)",dir("Analyzed-Data/"))]){
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
tmp0 <- mutate(tmp0, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
tmp0 <- tmp0[,length(tmp0[1,])-(5:0)]
top10[[gsub('-cleaned-data-top10.csv','',data)]] <- mutate(tmp0,delta=1/(phi*(IP-OP)*Tui))
#GC
rm(tmp0)
rm(data)
}
orig <- list()
for(data in dir("Analyzed-Data/")[grepl('cleaned-data.csv',dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data.csv','',data);
if(name=='Tot'){
name <- "4"
}
orig[[name]] <- read.csv(paste0('Analyzed-Data/',data),stringsAsFactors = FALSE)
rm(data)
rm(name)
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g1=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g1','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
chosen <- list()
for(data in dir("Analyzed-Data/")[grepl("-cleaned-data-chosen.csv",dir("Analyzed-Data/"))]){
name <- gsub('-cleaned-data-chosen.csv','',data);
tmp0 <- read.csv(paste0("Analyzed-Data/",data),stringsAsFactors = FALSE);
cls = c()
for(scID in 1:length(tmp0[,1])){
school = tmp0[scID,]
tmp1 = orig[[name]][which(orig[[name]][,2] == school$Name),]
tmp1 <- mutate(tmp1, IP=POOR_Prop, OP=1-gt_25k_p6,
Tui=Avg_Income_Low, phi=Tot_Students,
GR=Tot_Grant, R=GG_NO_re)
Uo <- top10[[name]][school$Class+1,]
go <- Uo$GR/Uo$phi
tmp1 <- mutate(tmp1, delta=1/(phi*Tui*(IP-OP)),g=go-GR/phi)
cls=rbind(cls,cbind(tmp0[scID,][,c('Name','Class')],tmp1[,c('g','delta')]))
}
chosen[[name]] = cls;
write.csv(cls,paste0('Matlab-Ready-Data/',name,'.csv'))
rm(list=c("Uo","go","tmp1","cls","school","name","tmp0","data","scID"))
}
